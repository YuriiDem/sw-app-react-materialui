{"ast":null,"code":"var _jsxFileName = \"D:\\\\my\\\\Projects\\\\Star Wars Wiki App\\\\star-wars-app\\\\src\\\\components\\\\SearchInput\\\\SearchInput.jsx\",\n    _s = $RefreshSig$();\n\nimport { useState, useEffect } from 'react';\nimport PropTypes from 'prop-types';\nimport InputBase from '@material-ui/core/InputBase';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Fuse from 'fuse.js';\nimport { getApiResources } from '@utils/network';\nimport { API_PEOPLE } from '@constants/api';\nimport { getPeopleId, getPeopleImg, getPageId } from '@services/getPeopleData';\nimport { withErrorApi } from '@hoc-helpers/withErrorApi';\nimport { useQueryParams } from '@hooks/useQueryParams';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst useStyles = makeStyles(theme => ({\n  inputRoot: {\n    color: 'inherit'\n  },\n  inputInput: {\n    padding: theme.spacing(1, 1, 1, 0),\n    // vertical padding + font size from searchIcon\n    paddingLeft: `calc(1em + ${theme.spacing(4)}px)`,\n    transition: theme.transitions.create('width'),\n    width: '100%',\n    [theme.breakpoints.up('sm')]: {\n      width: '12ch',\n      '&:focus': {\n        width: '20ch'\n      }\n    }\n  }\n}));\n\nfunction SearchInput() {\n  _s();\n\n  const fuse = new Fuse(people, {\n    keys: ['name']\n  });\n  const classes = useStyles();\n  const [people, setPeople] = useState(null); // prev && next page \n\n  const [prev, setPrev] = useState(null);\n  const [next, setNext] = useState(null);\n  const [counterPage, setCounterPage] = useState(1);\n  const query = useQueryParams();\n  const queryPage = query.get('page');\n\n  async function getResources(url) {\n    const res = await getApiResources(url);\n\n    if (res) {\n      const peopleList = res.results.map(({\n        name,\n        url\n      }) => {\n        const id = getPeopleId(url);\n        const img = getPeopleImg(id);\n        return {\n          id,\n          name,\n          img\n        };\n      });\n      setPeople(peopleList);\n      setPrev(res.previous);\n      setNext(res.next);\n      setCounterPage(getPageId(url));\n      setApiError(false);\n    } else {\n      setApiError(true);\n    }\n  }\n\n  useEffect(() => {\n    getResources(API_PEOPLE + queryPage);\n  }, []);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(InputBase, {\n      placeholder: \"Search\\u2026\",\n      classes: {\n        root: classes.inputRoot,\n        input: classes.inputInput\n      },\n      inputProps: {\n        'aria-label': 'search'\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 13\n    }, this)\n  }, void 0, false);\n}\n\n_s(SearchInput, \"y6uIfXLf/SyqOhiyHA9oc47Oevo=\", false, function () {\n  return [useStyles, useQueryParams];\n});\n\n_c = SearchInput;\nexport default SearchInput;\n\nvar _c;\n\n$RefreshReg$(_c, \"SearchInput\");","map":{"version":3,"sources":["D:/my/Projects/Star Wars Wiki App/star-wars-app/src/components/SearchInput/SearchInput.jsx"],"names":["useState","useEffect","PropTypes","InputBase","makeStyles","Fuse","getApiResources","API_PEOPLE","getPeopleId","getPeopleImg","getPageId","withErrorApi","useQueryParams","useStyles","theme","inputRoot","color","inputInput","padding","spacing","paddingLeft","transition","transitions","create","width","breakpoints","up","SearchInput","fuse","people","keys","classes","setPeople","prev","setPrev","next","setNext","counterPage","setCounterPage","query","queryPage","get","getResources","url","res","peopleList","results","map","name","id","img","previous","setApiError","root","input"],"mappings":"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","sourcesContent":["import { useState, useEffect } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport InputBase from '@material-ui/core/InputBase';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Fuse from 'fuse.js';\r\nimport { getApiResources } from '@utils/network';\r\nimport { API_PEOPLE } from '@constants/api';\r\nimport { getPeopleId, getPeopleImg, getPageId } from '@services/getPeopleData';\r\nimport { withErrorApi } from '@hoc-helpers/withErrorApi';\r\nimport { useQueryParams } from '@hooks/useQueryParams';\r\n\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    inputRoot: {\r\n        color: 'inherit',\r\n    },\r\n    inputInput: {\r\n        padding: theme.spacing(1, 1, 1, 0),\r\n        // vertical padding + font size from searchIcon\r\n        paddingLeft: `calc(1em + ${theme.spacing(4)}px)`,\r\n        transition: theme.transitions.create('width'),\r\n        width: '100%',\r\n        [theme.breakpoints.up('sm')]: {\r\n            width: '12ch',\r\n            '&:focus': {\r\n                width: '20ch',\r\n            },\r\n        },\r\n    },\r\n}));\r\n\r\n\r\nfunction SearchInput() {\r\n    const fuse = new Fuse(people, {\r\n        keys: [\r\n            'name',\r\n        ]\r\n    });\r\n\r\n    const classes = useStyles();\r\n\r\n    const [people, setPeople] = useState(null);\r\n\r\n    // prev && next page \r\n    const [prev, setPrev] = useState(null);\r\n    const [next, setNext] = useState(null);\r\n\r\n    const [counterPage, setCounterPage] = useState(1);\r\n\r\n    const query = useQueryParams();\r\n    const queryPage = query.get('page');\r\n\r\n\r\n\r\n    async function getResources(url) {\r\n        const res = await getApiResources(url);\r\n\r\n        if (res) {\r\n            const peopleList = res.results.map(({ name, url }) => {\r\n                const id = getPeopleId(url);\r\n                const img = getPeopleImg(id);\r\n\r\n                return {\r\n                    id,\r\n                    name,\r\n                    img\r\n                }\r\n            });\r\n\r\n            setPeople(peopleList);\r\n\r\n            setPrev(res.previous);\r\n            setNext(res.next);\r\n            setCounterPage(getPageId(url));\r\n            setApiError(false);\r\n        } else {\r\n            setApiError(true);\r\n        }\r\n    }\r\n\r\n    useEffect(() => {\r\n        getResources(API_PEOPLE + queryPage);\r\n    }, []);\r\n\r\n\r\n    return (\r\n        <>\r\n            <InputBase\r\n                placeholder=\"Searchâ€¦\"\r\n                classes={{\r\n                    root: classes.inputRoot,\r\n                    input: classes.inputInput,\r\n                }}\r\n                inputProps={{ 'aria-label': 'search' }}\r\n            />\r\n        </>\r\n    );\r\n}\r\n\r\n\r\n\r\nexport default SearchInput;"]},"metadata":{},"sourceType":"module"}